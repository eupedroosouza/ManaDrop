plugins {
    id 'maven-publish'
    id 'com.gradle.plugin-publish' version '0.11.0'
    id 'java-gradle-plugin'
}

version = '0.4.4'

dependencies {
    implementation gradleApi()
    shadow 'com.github.carleslc:simple-yaml:1.4.1'
    shadow 'net.md-5:SpecialSource:1.11.0'
    shadow project(':util')
}

gradlePlugin {

    plugins {
        manadrop {
            id = 'io.github.eupedroosouza.fr.il_totore.manadrop'
            implementationClass = 'fr.il_totore.manadrop.ManaDrop'
        }
    }
}

pluginBundle {
    website = 'https://github.com/eupedroosouza/ManaDrop'
    vcsUrl = 'https://github.com/eupedroosouza/ManaDrop'
    plugins {
        manadrop {
            displayName = 'ManaDrop'
            description = 'Gradle plugin that helps Minecraft developers automate tasks and make plugins more portable.'
            version = project.version
            tags = Arrays.asList('minecraft', 'spigot', 'remap', 'specialsource', 'bungeecord')
        }
    }
}

shadowJar {
    configurations = [project.configurations.shadow]
    classifier ''
}

jar {
    enabled false
    dependsOn shadowJar
}